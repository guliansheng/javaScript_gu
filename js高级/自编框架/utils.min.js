var utils=(function(){ var flag="getComputedStyle"in window; var Effect={Linear:function(t,b,c,d){return c*t/d+b;},Bounce:{easeIn:function(t,b,c,d){return c-Effect.Bounce.easeOut(d-t,0,c,d)+b;},easeOut:function(t,b,c,d){if((t/=d)<(1/2.75)){return c*(7.5625*t*t)+b;}else if(t<(2/2.75)){return c*(7.5625*(t-=(1.5/2.75))*t+.75)+b;}else if(t<(2.5/2.75)){return c*(7.5625*(t-=(2.25/2.75))*t+.9375)+b;}else{return c*(7.5625*(t-=(2.625/2.75))*t+.984375)+b;}},easeInOut:function(t,b,c,d){if(t<d/2){return Effect.Bounce.easeIn(t*2,0,c,d)*.5+b;}
return Effect.Bounce.easeOut(t*2-d,0,c,d)*.5+c*.5+b;}},Quad:{easeIn:function(t,b,c,d){return c*(t/=d)*t+b;},easeOut:function(t,b,c,d){return-c*(t/=d)*(t-2)+b;},easeInOut:function(t,b,c,d){if((t/=d/2)<1){return c/2*t*t+b;}
return-c/2*((--t)*(t-2)-1)+b;}},Cubic:{easeIn:function(t,b,c,d){return c*(t/=d)*t*t+b;},easeOut:function(t,b,c,d){return c*((t=t/d-1)*t*t+1)+b;},easeInOut:function(t,b,c,d){if((t/=d/2)<1){return c/2*t*t*t+b;}
return c/2*((t-=2)*t*t+2)+b;}},Quart:{easeIn:function(t,b,c,d){return c*(t/=d)*t*t*t+b;},easeOut:function(t,b,c,d){return-c*((t=t/d-1)*t*t*t-1)+b;},easeInOut:function(t,b,c,d){if((t/=d/2)<1){return c/2*t*t*t*t+b;}
return-c/2*((t-=2)*t*t*t-2)+b;}},Quint:{easeIn:function(t,b,c,d){return c*(t/=d)*t*t*t*t+b;},easeOut:function(t,b,c,d){return c*((t=t/d-1)*t*t*t*t+1)+b;},easeInOut:function(t,b,c,d){if((t/=d/2)<1){return c/2*t*t*t*t*t+b;}
return c/2*((t-=2)*t*t*t*t+2)+b;}},Sine:{easeIn:function(t,b,c,d){return-c*Math.cos(t/d*(Math.PI/2))+c+b;},easeOut:function(t,b,c,d){return c*Math.sin(t/d*(Math.PI/2))+b;},easeInOut:function(t,b,c,d){return-c/2*(Math.cos(Math.PI*t/d)-1)+b;}},Expo:{easeIn:function(t,b,c,d){return(t==0)?b:c*Math.pow(2,10*(t/d-1))+b;},easeOut:function(t,b,c,d){return(t==d)?b+c:c*(-Math.pow(2,-10*t/d)+1)+b;},easeInOut:function(t,b,c,d){if(t==0)return b;if(t==d)return b+c;if((t/=d/2)<1)return c/2*Math.pow(2,10*(t-1))+b;return c/2*(-Math.pow(2,-10*--t)+2)+b;}},Circ:{easeIn:function(t,b,c,d){return-c*(Math.sqrt(1-(t/=d)*t)-1)+b;},easeOut:function(t,b,c,d){return c*Math.sqrt(1-(t=t/d-1)*t)+b;},easeInOut:function(t,b,c,d){if((t/=d/2)<1){return-c/2*(Math.sqrt(1-t*t)-1)+b;}
return c/2*(Math.sqrt(1-(t-=2)*t)+1)+b;}},Back:{easeIn:function(t,b,c,d,s){if(s==undefined)s=1.70158;return c*(t/=d)*t*((s+1)*t-s)+b;},easeOut:function(t,b,c,d,s){if(s==undefined)s=1.70158;return c*((t=t/d-1)*t*((s+1)*t+s)+1)+b;},easeInOut:function(t,b,c,d,s){if(s==undefined)s=1.70158;if((t/=d/2)<1){return c/2*(t*t*(((s*=(1.525))+1)*t-s))+b;}
return c/2*((t-=2)*t*(((s*=(1.525))+1)*t+s)+2)+b;}},Elastic:{easeIn:function(t,b,c,d,a,p){if(t==0)return b;if((t/=d)==1)return b+c;if(!p)p=d*.3;var s;!a||a<Math.abs(c)?(a=c,s=p/4):s=p/(2*Math.PI)*Math.asin(c/a);return-(a*Math.pow(2,10*(t-=1))*Math.sin((t*d-s)*(2*Math.PI)/p))+b;},easeOut:function(t,b,c,d,a,p){if(t==0)return b;if((t/=d)==1)return b+c;if(!p)p=d*.3;var s;!a||a<Math.abs(c)?(a=c,s=p/4):s=p/(2*Math.PI)*Math.asin(c/a);return(a*Math.pow(2,-10*t)*Math.sin((t*d-s)*(2*Math.PI)/p)+c+b);},easeInOut:function(t,b,c,d,a,p){if(t==0)return b;if((t/=d/2)==2)return b+c;if(!p)p=d*(.3*1.5);var s;!a||a<Math.abs(c)?(a=c,s=p/4):s=p/(2*Math.PI)*Math.asin(c/a);if(t<1)return-.5*(a*Math.pow(2,10*(t-=1))*Math.sin((t*d-s)*(2*Math.PI)/p))+b;return a*Math.pow(2,-10*(t-=1))*Math.sin((t*d-s)*(2*Math.PI)/p)*.5+c+b;}}}
 
function win(attr,value){if(typeof value==="undefined"){return document.documentElement[attr]||document.body[attr];}else{document.documentElement[attr]=value;document.body[attr]=value;}}
function listToArray(likeAry){if(flag){return Array.prototype.slice.call(likeAry);}
var ary=[];for(var i=0;i<likeAry.length;i++){ary[ary.length]=likeAry[i];}
return ary;}
function children(curEle,tagName){var arr=[]; if(!flag){var nodeList=curEle.childNodes;for(var i=0;i<nodeList.length;i++){var curNode=nodeList[i];if(curNode.nodeType===1){arr[arr.length]=curNode;}}}else{ arr=Array.prototype.slice.call(curEle.children);}
if(typeof tagName==="string"){for(var j=0;j<arr.length;j++){var curEleNode=arr[j];if(curEleNode.nodeName.toLowerCase()!==tagName.toLowerCase()){arr.splice(j,1);j--;}};}
return arr;}
function getCss(curEle,attr){var val=null,reg=null;if(flag){val=window.getComputedStyle(curEle,null)[attr];}else{if(attr==="opacity"){ val=curEle.currentStyle["fliter"];reg=/^alpha\(opacity=(\d+(?:\.\d+)?)\)$/i;val=reg.test(val)?reg.exec(val)[1]/100:1;}else{val=curEle.currentStyle[attr];}}
reg=/^(-?\d+(\.\d+)?)(cm|px|pt|rem|em|%)?$/i; return reg.test(val)?parseFloat(val):val;} 
function setCss(curEle,attr,val){if(attr==="float"){curEle["style"]["cssFloat"]=val;curEle["style"]["styleFloat"]=val;return;};if(attr==="opacity"){curEle["style"]["opacity"]=val;curEle["style"]["filter"]="alpha(opacity="+val*100+")";return;};var reg=/^(width|height|top|bottom|left|right|fontSize|((margin|padding)(Top|Bottom|Left|Right)?))$/;if(reg.test(attr)){if(!isNaN(val)){ val+='px';}};curEle["style"][attr]=val;} 
function setGroupCss(curEle,options){if(Object.prototype.toString.call(options)!=="[object Object]"){return;}
for(var key in options){if(options.hasOwnProperty(key)){this.setCss(curEle,key,options[key]);};}} 
function css(curEle){var argTow=arguments[1];if(typeof argTow==="string"){ var argThree=arguments[2];if(typeof argThree==="undefined"){ return this.getCss.apply(this,arguments);}; this.setCss.apply(this,arguments);}
argTow=argTow||0;if(argTow.toString()==="[object Object]"){ this.setGroupCss.apply(this,arguments);}} 
function getTransform(curEle){var iboxtransf=utils.getCss(curEle,'transform');console.log(iboxtransf)
var reg=/\((.+)\)/g,arr=[];iboxtransf.replace(reg,function(){arr=arguments[1].split(", ")})
return arr;}
function offset(curEle){var totalLeft=null,totalTop=null,par=curEle.offsetParent;totalLeft+=curEle.offsetLeft;totalTop+=curEle.offsetTop;while(par){if(navigator.userAgent.indexOf("MSIE 8.0")===-1){ totalLeft+=par.clientLeft;totalTop+=par.clientTop;} 
totalLeft+=par.offsetLeft;totalTop+=par.offsetTop;par=par.offsetParent;}
return{left:totalLeft,top:totalTop}}
function queryURLParameter(url){var quesIndex=url.indexOf('?');if(quesIndex===-1){return{}}else{var str2=str.substr(quesIndex+1);var arr2=[];var json={};arr=str2.split('&')
for(var i=0;i<arr.length;i++){arr2=arr[i].split('=');json[arr2[0]]=arr2[1];}
return json;}} 
function getTranslate(node,asix){var regRule=eval('/translate('+asix+'|\\dd)?\\(\\s*(\\w+\\s*,)?\\s*([^,]+)(\\s*,[^)]+)?\\s*\\)/');var regRule2=/matrix\(.*,\s*(\w+)\s*\)/;var transform=node.style.transform;var reg;if(!transform){return null;}
reg=regRule.exec(transform);if(null===reg){reg=regRule2.exec(transform);return reg?reg[1]:null;}
return reg[3];} 
function prev(curEle){if(flag){return curEle.previousElementSibling;}
var pre=curEle.previousSibling;while(pre&&pre.nodeName!==1){pre=pre.previousSibling;}
return pre;} 
function next(curEle){if(flag){return curEle.nextElementSibling;}
var nex=curEle.nextSibling;while(nex&&nex.nodeType!==1){nex=nex.nextSibling;}
return nex;} 
function prevAll(curEle){var arr=[];var pre=this.prev(curEle);while(pre){arr.unshift(pre);pre=this.prev(pre);}
return arr;} 
function nextAll(curEle){var arr=[];var nex=this.next(curEle);while(nex){arr.push(nex);nex=this.next(nex);}
return arr;} 
function sibling(curEle){var pre=this.prev(curEle);var nex=this.next(curEle);var arr=[];pre?arr.push(pre):null;nex?arr.push(nex):null;return arr;} 
function siblings(curEle){return this.prevAll(curEle).concat(this.nextAll(curEle));} 
function index(curEle){return this.prevAll(curEle).length;} 
function firstChild(curEle){var chs=this.children(curEle);return chs.length>0?chs[0]:null;} 
function lastChild(curEle){var chs=this.children(curEle);return chs.length>0?chs[chs.length-1]:null;} 
function append(newEle,container){container.appendChid(newEle);} 
function prepend(newEle,container){var fir=this.firstChild(container);if(fir){container.insertBefore(newEle,fir);return;}
container.appendChid(newEle);} 
function insertBefore(newEle,oldEle){oldEle.parentNode.insertBefore(newEle,oldEle);} 
function insertAfter(newEle,oldEle){var nex=this.next(oldEle);if(nex){oldEle.parentNode.insertBefore(newEle,nex);return;}
oldEle.parentNode.appendChid(newEle);} 
function hasClass(curEle,className){var reg=new RegExp("(^| +)"+className+"( +|$)");return reg.test(curEle.className);} 
function addClass(curEle,className){ var arr=className.replace(/(^ +| +$)/g,"").split(/ +/g); for(var i=0;i<arr.length;i++){var curName=arr[i];if(!this.hasClass(curEle,curName)){curEle.className+=" "+curName;};};} 
function removeClass(curEle,className){var arr=className.replace(/(^ +| +$)/g,"").split(/ +/g);for(var i=0;i<arr.length;i++){var curName=arr[i];if(this.hasClass(curEle,curName)){var reg=new RegExp("(^| +)"+curName+"( +|$)","g");curEle.className=curEle.className.replace(reg," ");};};}
function getElementsByClassName(className,context){context=context||document;if(flag){return this.listToArray(context.getElementsByClassName(className))}
var classNameArr=className.replace(/(^ +| +$)/g,"").split(/ +/g);var nodeList=context.getElementsByTagName('*'); var arr=[];for(var i=0;i<nodeList.length;i++){var curNode=nodeList[i];var isOk=true;for(var j=0;j<classNameArr.length;j++){var curName=classNameArr[j];var reg=new RegExp("(^| +)"+classNameArr[j]+"( +|$)");if(!reg.test(curNode.className)){isOk=false;break;}}
if(isOk){arr.push(curNode);}}
return arr;}

function Tab(tab,num,ev){num=num||0;ev=ev||'onclick';var tabFirst=utils.firstChild(tab),tabFirstChild=utils.children(tabFirst),divList=utils.children(tab).slice(1,utils.children(tab).length);for(var i=0;i<tabFirstChild.length;i++){utils.removeClass(tabFirstChild[i],'select');utils.removeClass(divList[i],'select');};utils.addClass(tabFirstChild[num],'select');utils.addClass(divList[num],'select');tabFirst[ev]=function(e){e=e||window.event;e.target=e.target||e.srcElement;if(e.target.tagName.toLowerCase()==="li"){var index=utils.index(e.target);for(var i=0;i<tabFirstChilds.length;i++){utils.removeClass(tabFirstChilds[i],'select')
utils.removeClass(divList[i],'select')};utils.addClass(e.target,'select');utils.addClass(divList[index],'select')}}}
function Animate(curEle,target,duration,effect,callback){ var tempEffect=Effect.Linear;if(effect instanceof Array){tempEffect=effect.length>=2?Effect[effect[0]][effect[1]]:Effect[effect[0]];}else if(typeof effect==='function'){callback=effect;}
clearInterval(curEle.timer); var begin={},change={};for(var key in target){if(target.hasOwnProperty(key)){begin[key]=utils.css(curEle,key);change[key]=target[key]-begin[key];}} 
var time=0
curEle.timer=setInterval(function(){time+=10; if(time>=duration){utils.css(curEle,target)
clearInterval(curEle.timer);if(typeof callback==='function'){callback.call(curEle);}
return;}; for(var key in target){if(target.hasOwnProperty(key)){var curPos=tempEffect(time,begin[key],change[key],duration);utils.css(curEle,key,curPos);}}},10)}
function Carousel(bannerObj,data,timeInt,timeTra){~function(){timeInt=timeInt||3000;timeTra=timeTra||400; var str='';for(var i=0;i<data.length;i++){str+="<img src='' height = '"+data[i].height+"' width = '"+data[i].width+"' isSrc = '"+data[i].isSrc+"'>"};var contentObj=utils.children(bannerObj)[0];contentObj.innerHTML=str;var dot=utils.children(bannerObj)[1],leftObj=utils.children(bannerObj)[2],rightObj=utils.children(bannerObj)[3],contentImg=utils.children(contentObj,'img'),imgNum=contentImg.length,imgWidth=contentImg[0].offsetWidth;str=''; for(var i=0;i<contentImg.length;i++){if(i==0){utils.append(contentObj,contentImg[i].cloneNode(true));str+="<li class = 'on' index = "+(i+1)+"></li>"
continue;}
if(i==contentImg.length-1){utils.prepend(contentObj,contentImg[i].cloneNode(true))}
str+="<li index = "+(i+1)+"></li>"};dot.innerHTML=str;var dotLi=dot.getElementsByTagName('li');contentImg=utils.children(contentObj,'img'); setTimeout(function(){for(var i=0;i<contentImg.length;i++){~function(i){var newImg=new Image;newImg.src=contentImg[i].getAttribute('isSrc');newImg.onload=function(){contentImg[i].src=this.src;Animate(contentImg[i],{opacity:1},500)
newImg=null;}}(i)};},2000)
bannerObj.style.width=imgWidth+'px';contentObj.style.width=(imgNum+2)*imgWidth+'px';contentObj.style.left=-imgWidth+'px';var index=1,animated=false,timer=null;rightObj.onclick=function(){if(!animated){animate(-imgWidth);if(index==imgNum){index=1}else{index++}
showdot()}}
leftObj.onclick=function(){if(!animated){animate(imgWidth)
if(index==1){index=imgNum}else{index--}
showdot()}} 
bannerObj.onclick=function(event){event=event||window.event
var target=event.target||event.srcElement
if(target.tagName.toLowerCase()==='li'){if(!animated){var myindex=target.getAttribute('index')
var newindex=-imgWidth*(myindex-index)
animate(newindex)
index=myindex
showdot()}}}
function showdot(){for(var i=0;i<dotLi.length;i++){if(dotLi[i].className=='on'){dotLi[i].className='';}}
dotLi[index-1].className='on';} 
var star=function(){timer=setInterval(function(){rightObj.click();},timeInt);}; var stop=function(){clearInterval(timer);}
bannerObj.onmouseover=stop;bannerObj.onmouseout=star;star(); function animate(offset){animated=true;var newleft=parseInt(contentObj.style.left)+offset; var time=timeTra; var interval=4; var speed=offset/(time/interval);~function go(){if((speed<0&&parseInt(contentObj.style.left)>newleft)||(speed>0&&parseInt(contentObj.style.left)<newleft)){contentObj.style.left=parseInt(contentObj.style.left)+speed+'px';setTimeout(go,interval);}else{if(newleft>-imgWidth){contentObj.style.left=-(imgWidth*imgNum)+'px';}
if(newleft<-(imgWidth*imgNum)){contentObj.style.left=-imgWidth+'px';}
animated=false;}}();}}();}
return{ win:win,listToArray:listToArray,children:children,getCss:getCss,setCss:setCss, setGroupCss:setGroupCss, css:css, getTransform:getTransform,offset:offset,queryURLParameter:queryURLParameter, getTranslate:getTranslate, prev:prev, next:next, prevAll:prevAll, nextAll:nextAll, sibling:sibling, siblings:siblings, index:index, firstChild:firstChild, lastChild:lastChild, append:append, prepend:prepend, insertBefore:insertBefore, insertAfter:insertAfter, hasClass:hasClass, addClass:addClass, removeClass:removeClass, getElementsByClassName:getElementsByClassName,
Tab:Tab,Animate:Animate,Carousel:Carousel,}})();